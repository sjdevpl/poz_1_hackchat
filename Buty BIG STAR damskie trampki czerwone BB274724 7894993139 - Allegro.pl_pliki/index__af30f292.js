!function(e,t){"use strict";!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else{var i=t();for(var o in i)("object"==typeof exports?exports:e)[o]=i[o]}}(t,function(){return function(e){var t={};function i(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(o,a,function(t){return e[t]}.bind(null,a));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="https://assets.allegrostatic.com/opbox-modal/",i(i.s="oid+")}({"oid+":function(e,i,o){function a(){return t.location.hash}o.r(i);var n=function(){function e(i){!function(t,i){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),this.baseNode=i,this.modalNode=i.querySelector("[data-modal-id]"),this.bodyNode=t.document.querySelector("body"),this.id=this.modalNode.getAttribute("data-modal-id"),this.triggerHash=this.modalNode.getAttribute("data-trigger-hash"),this.visibilityClassname=this.modalNode.getAttribute("data-visibility-classname"),this.scrollDisabledClassName=this.modalNode.getAttribute("data-scroll-disabled-classname"),this.contentNode=this.baseNode.querySelector(".".concat(this.modalNode.getAttribute("data-content-classname"))),this.overlayNode=this.baseNode.querySelector(".".concat(this.modalNode.getAttribute("data-overlay-classname"))),this.scrollContainer=this.baseNode.querySelector(".".concat(this.modalNode.getAttribute("data-scroll-container-classname"))),this.showInitially=JSON.parse(this.modalNode.getAttribute("data-show-initially")),this.preferenceName=this.modalNode.getAttribute("data-report-visibility-preference-key"),this.preferenceValue=JSON.parse(this.modalNode.getAttribute("data-report-visibility-preference-value")),this.visible=!1,this.boundToggleVisibility=this.toggleVisibility.bind(this),this.attachListeners(),this.openConditionally(),this.actionTypeValue={open:"open",close:"close"}}var i;return(i=[{key:"reportVisibility",value:function(){this.preferenceName&&t.opbox.preferences.set(this.preferenceName,this.preferenceValue)}},{key:"toggleVisibility",value:function(){return this.visible?this.hideModal():this.showModal()}},{key:"showModal",value:function(){this.visible=!0,this.modalNode.classList.add(this.visibilityClassname),this.bodyNode.classList.add(this.scrollDisabledClassName),t.opbox.boxViewsMarker.recursivelyMarkBoxAsVisible(this.contentNode),this.reportVisibility()}},{key:"hideModal",value:function(){var e,i,o;this.visible=!1,this.modalNode.classList.remove(this.visibilityClassname),this.bodyNode.classList.remove(this.scrollDisabledClassName),a()===this.triggerHash&&(i=(e=t.location).pathname,o=e.search,t.history.replaceState("",t.document.title,"".concat(i).concat(o))),t.opbox.boxViewsMarker.recursivelyMarkBoxAsHidden(this.contentNode)}},{key:"hideModalAfterOverlayClick",value:function(){t.opbox.analytics.sendEvent(this.overlayNode,"boxInteraction","modalClose_overlay"),this.hideModal()}},{key:"openConditionally",value:function(){(a()===this.triggerHash||this.showInitially)&&this.showModal()}},{key:"handleHashChangeAnalytics",value:function(e){t.opbox.analytics.sendBoxInteractionEvent({contextNode:this.overlayNode,label:e===this.actionTypeValue.open?"modalOpen":"modalClose",value:"hashChange"})}},{key:"handleHashChange",value:function(){var e=a();if(this.visible&&!e)return this.hideModal(),void this.handleHashChangeAnalytics(this.actionTypeValue.close);this.visible||e!==this.triggerHash||(this.showModal(),this.handleHashChangeAnalytics(this.actionTypeValue.open))}},{key:"attachListeners",value:function(){var e,i=this;(e=this.baseNode.querySelectorAll('[data-role="modal-trigger"]'),function(e){if(Array.isArray(e)){for(var t=0,i=[];t<e.length;t++)i[t]=e[t];return i}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()).forEach(function(e){return e.addEventListener("click",i.boundToggleVisibility)}),t.addEventListener("keydown",function(e){27===e.keyCode&&i.visible&&(e.preventDefault(),t.opbox.analytics.sendEvent(i.baseNode,"boxInteraction","modalClose_escKey"),i.hideModal())}),t.document.addEventListener("click",function(e){return e.target===i.overlayNode&&i.hideModalAfterOverlayClick()}),t.addEventListener("hashchange",this.handleHashChange.bind(this)),t.opbox.boxViewsMarker.trackBoxScroll(this.scrollContainer)}}])&&function(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}(e.prototype,i),e}();t.opbox.component.init({prototypeName:"allegro.modal"},function(e){e.domNodes.forEach(function(e){return new n(e)})})}})})}(0,"undefined"!=typeof window?window:global);